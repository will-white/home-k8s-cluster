{
  "$schema": "https://raw.githubusercontent.com/devcontainers/spec/main/schemas/devContainer.schema.json",
  "name": "Flux Cluster Template",
  "build": {
    "dockerfile": "Dockerfile"
  },
  "features": {
    "ghcr.io/devcontainers/features/common-utils:2": {
      "installZsh": "false",
      "installOhMyZsh": "false",
      "upgradePackages": "true",
      "username": "vscode",
      "userUid": "1000",
      "userGid": "1000"
    },
    "ghcr.io/devcontainers/features/go:1": {
      "version": "1.22"
    },
    "ghcr.io/devcontainers/features/python:1": {
      "version": "3.13"
    },
    "ghcr.io/devcontainers/features/kubectl-helm-minikube:1": {},
    "ghcr.io/devcontainers/features/docker-in-docker:2": {
      "moby": "true",
      "installDockerBuildx": "true",
      "version": "latest",
      "dockerDashComposeVersion": "v2"
    },
    "ghcr.io/jsburckhardt/devcontainer-features/flux:1": {
      "version": "latest"
    },
    "ghcr.io/nikobockerman/devcontainer-features/fish-persistent-data:2": {},
    "ghcr.io/eitsupi/devcontainer-features/go-task:1": {}
  },
  "postCreateCommand": {
    "fisher": "fish -c \"curl -sL https://git.io/fisher | source && fisher install jorgebucaran/fisher && fisher update && fisher install decors/fish-colored-man edc/bass jorgebucaran/autopair.fish nickeb96/puffer-fish PatrickF1/fzf.fish\"",
    "install-direnv": "curl -sfL https://direnv.net/install.sh | bash",
    "workstation-venv": "task workstation:venv"
  },
  "postStartCommand": {
    "git": "git config --global --add safe.directory ${containerWorkspaceFolder}"
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-azuretools.vscode-docker"
      ]
    }
  }
}
